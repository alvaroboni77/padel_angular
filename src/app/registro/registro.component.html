<div class="container">
  <div class="jumbotron">
    <form *ngIf="!registered" ngNativeValidate #form>
      <fieldset>
        <legend>Regístrate:</legend>
        <div class="form-group row">
          <label for="inputUsuario" class="col-sm-3 col-form-label text-right">Usuario</label>
          <div class="col-sm-8">
            <input type="text" #username (blur)="checkUsername(username.value)" class="form-control" id="inputUsuario" placeholder="Identificador de usuario" required>
            <p *ngIf="exists" class="error_usuario">Este usuario ya existe</p>
          </div>
        </div>
        <div class="form-group row">
          <label for="inputEmail" class="col-sm-3 col-form-label text-right">Correo</label>
          <div class="col-sm-8">
            <input type="email" #email class="form-control" id="inputEmail" placeholder="Email" required>
          </div>
        </div>
        <div class="form-group row">
          <label for="inputPassword" class="col-sm-3 col-form-label text-right">Contraseña</label>
          <div class="col-sm-8">
            <input type="password" #password class="form-control" id="inputPassword" placeholder="Contraseña" required>
          </div>
        </div>
        <div class="form-group row">
          <label for="inputConfirmPass" class="col-sm-3 col-form-label text-right">Repita la contraseña</label>
          <div class="col-sm-8">
            <input type="password" class="form-control" id="inputConfirmPass" placeholder="Repetir contraseña" required>
          </div>
        </div>
        <div class="form-group row">
          <label for="inputNacimiento" class="col-sm-3 col-form-label text-right">Fecha de nacimiento</label>
          <div class="col-sm-8">
            <input type="date" #date class="form-control" id="inputNacimiento">
            <p *ngIf="errorDuplicated" class="error_usuario">Debe cambiar el nombre de usuario</p>
            <p *ngIf="errorServer" class="error_usuario">Error interno del servidor</p>
          </div>
        </div>
        <div class="form-group row text-center">
          <div class="col-sm-3 offset-4">
            <p id="captcha_text">¿Cuánto es {{ranNum1}} + {{ranNum2}}?</p>
            <input type="text" (blur)="check_captcha(captcha.value)" #captcha id="captcha_input">
            <p *ngIf="captchaMessage" id="captcha_error">La respuesta es incorrecta</p>
          </div>
        </div>
        <div  class="form-group row">
          <div class="col-sm-2 offset-5">
            <button type="submit" (click)="form.checkValidity() ? createUser(username.value, email.value, password.value, date.value) : null" class="btn btn-primary"  [disabled]="isDisabled">Enviar</button>
          </div>
        </div>
      </fieldset>
    </form>
    <h4 *ngIf="registered" class="text-center">El usuario se ha creado correctamente</h4>
  </div>
</div>
